<ResourceDictionary
    x:Class="NINA.RBarbera.Plugin.NeocpHelper.NeocpHelperTestCategory.PluginItemTemplate"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:NINA.RBarbera.Plugin.NeocpHelper.Sequencer.Containers"
    xmlns:models="clr-namespace:NINA.RBarbera.Plugin.NeocpHelper.Models"
    xmlns:mini="clr-namespace:NINA.View.Sequencer.MiniSequencer;assembly=NINA.Sequencer"
    xmlns:nina="clr-namespace:NINA.View.Sequencer;assembly=NINA.Sequencer"
    xmlns:behaviors="clr-namespace:NINA.Sequencer.Behaviors;assembly=NINA.Sequencer"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:ninactrl="clr-namespace:NINACustomControlLibrary;assembly=NINACustomControlLibrary"
    xmlns:ns="clr-namespace:NINA.Core.Locale;assembly=NINA.Core"
    xmlns:rules="clr-namespace:NINA.Core.Utility.ValidationRules;assembly=NINA.Core"
    xmlns:util="clr-namespace:NINA.Core.Utility;assembly=NINA.Core"
    xmlns:view="clr-namespace:NINA.View.Sequencer;assembly=NINA.Sequencer" 
    xmlns:alt="clr-namespace:NINA.RBarbera.Plugin.NeocpHelper.View"
    >

    <!--  This geometrygroup defines a custom SVG to be used with the plugin instruction  -->
    <GeometryGroup x:Key="Plugin_Test_SVG">
        <PathGeometry Figures="M 153.646,20.8542L 88.875,20.8542L 88.875,180.708L 64.7708,180.708L 64.7708,20.8542L -1.01725e-005,20.8542L -1.01725e-005,-0.5625L 153.646,-0.5625L 153.646,20.8542 Z " />
        <PathGeometry Figures="M 263.627,115.083L 163.44,115.083C 163.44,123.458 164.69,130.729 167.211,136.938C 169.711,143.146 173.169,148.25 177.544,152.229C 181.752,156.125 186.773,159.042 192.586,161C 198.377,162.958 204.773,163.917 211.773,163.917C 221.023,163.917 230.336,162.083 239.711,158.375C 249.086,154.688 255.752,151.063 259.732,147.479L 260.94,147.479L 260.94,172.438C 253.232,175.688 245.357,178.396 237.315,180.583C 229.273,182.771 220.836,183.875 212.002,183.875C 189.44,183.875 171.836,177.771 159.169,165.563C 146.502,153.354 140.169,136 140.169,113.5C 140.169,91.2708 146.232,73.625 158.377,60.5417C 170.502,47.4792 186.482,40.9375 206.294,40.9375C 224.627,40.9375 238.752,46.3125 248.711,57.0208C 258.648,67.7292 263.627,82.9583 263.627,102.667L 263.627,115.083 Z M 241.357,97.5625C 241.273,85.5625 238.232,76.2708 232.273,69.6875C 226.315,63.1042 217.232,59.8125 205.065,59.8125C 192.815,59.8125 183.044,63.4375 175.794,70.6458C 168.523,77.875 164.398,86.8542 163.44,97.5625L 241.357,97.5625 Z " />
        <PathGeometry Figures="M 395.425,141.5C 395.425,153.917 390.28,164.104 380.03,172.063C 369.759,180.021 355.738,184 337.967,184C 327.905,184 318.675,182.792 310.28,180.417C 301.863,178.021 294.821,175.396 289.155,172.542L 289.155,146.854L 290.363,146.854C 297.571,152.313 305.613,156.625 314.467,159.833C 323.3,163.042 331.8,164.646 339.925,164.646C 349.967,164.646 357.842,163.021 363.53,159.771C 369.196,156.521 372.05,151.417 372.05,144.438C 372.05,139.083 370.509,135.021 367.425,132.25C 364.342,129.5 358.405,127.146 349.655,125.188C 346.405,124.479 342.155,123.625 336.925,122.646C 331.696,121.667 326.925,120.604 322.634,119.479C 310.696,116.313 302.238,111.667 297.238,105.542C 292.238,99.4167 289.759,91.875 289.759,82.9375C 289.759,77.3542 290.905,72.0833 293.217,67.125C 295.53,62.1667 299.05,57.75 303.759,53.8542C 308.3,50.0417 314.071,47.0208 321.092,44.7917C 328.113,42.5625 335.967,41.4375 344.675,41.4375C 352.78,41.4375 360.988,42.4375 369.321,44.4167C 377.634,46.4167 384.55,48.8333 390.071,51.6667L 390.071,76.125L 388.863,76.125C 383.009,71.8333 375.905,68.1875 367.55,65.2292C 359.175,62.2708 350.988,60.7917 342.967,60.7917C 334.592,60.7917 327.53,62.3958 321.78,65.6042C 316.009,68.8125 313.134,73.5833 313.134,79.8958C 313.134,85.5208 314.863,89.7292 318.363,92.5625C 321.78,95.4167 327.3,97.7292 334.925,99.5C 339.134,100.479 343.863,101.458 349.113,102.438C 354.342,103.417 358.696,104.313 362.196,105.104C 372.821,107.542 381.03,111.729 386.8,117.646C 392.55,123.646 395.425,131.604 395.425,141.5 Z " />
        <PathGeometry Figures="M 498.653,179.5C 494.361,180.625 489.673,181.542 484.59,182.292C 479.507,183.021 474.986,183.396 471.028,183.396C 457.153,183.396 446.59,179.667 439.361,172.188C 432.132,164.729 428.528,152.75 428.528,136.271L 428.528,63.9583L 413.069,63.9583L 413.069,44.7292L 428.528,44.7292L 428.528,5.64583L 451.423,5.64583L 451.423,44.7292L 498.653,44.7292L 498.653,63.9583L 451.423,63.9583L 451.423,125.917C 451.423,133.083 451.569,138.667 451.903,142.667C 452.236,146.688 453.361,150.438 455.319,153.917C 457.111,157.167 459.569,159.542 462.694,161.042C 465.819,162.542 470.569,163.292 476.986,163.292C 480.715,163.292 484.611,162.75 488.673,161.667C 492.715,160.583 495.653,159.667 497.444,158.917L 498.653,158.917L 498.653,179.5 Z " />
    </GeometryGroup>

    <GeometryGroup x:Key="ImpactorSVG">
        <PathGeometry Figures="M 13.1973,46.6667C 5.90129,46.6667 -4.06901e-005,40.7654 -4.06901e-005,33.4627C -4.06901e-005,26.1667 5.90129,20.2654 13.1973,20.2654C 20.5,20.2654 26.4013,26.1667 26.4013,33.4627C 26.4013,40.7654 20.5,46.6667 13.1973,46.6667 Z M 13.1973,22.4627C 7.09863,22.4627 2.19731,27.4627 2.19731,33.4627C 2.19731,39.4627 7.19731,44.4627 13.1973,44.4627C 19.1973,44.4627 24.1973,39.4627 24.1973,33.4627C 24.1973,27.4627 19.296,22.4627 13.1973,22.4627 Z "/>
        <PathGeometry Figures="M 3.99996,26.568C 3.69731,26.568 3.49996,26.4627 3.19731,26.2654C 2.79598,25.8641 2.79598,25.1667 3.19731,24.7654L 22.4013,5.56804C 22.796,5.16671 23.5,5.16671 23.9013,5.56804C 24.296,5.96273 24.296,6.66671 23.9013,7.06804L 4.79598,26.2654C 4.59863,26.4627 4.29598,26.568 3.99996,26.568 Z "/>
        <PathGeometry Figures="M 21.6973,43.1667C 21.4013,43.1667 21.1973,43.068 20.9013,42.8641C 20.5,42.4627 20.5,41.7654 20.9013,41.3641L 37.6973,24.568C 38.0986,24.1667 38.796,24.1667 39.1973,24.568C 39.5986,24.9627 39.5986,25.6667 39.1973,26.068L 22.4013,42.8641C 22.296,43.068 22,43.1667 21.6973,43.1667 Z "/>
        <PathGeometry Figures="M 41.5986,23.2654C 41.296,23.2654 41.0986,23.1667 40.796,22.9627C 40.4013,22.568 40.4013,21.8641 40.796,21.4627L 46.5986,15.6667C 47,15.2654 47.6973,15.2654 48.0986,15.6667C 48.5,16.068 48.5,16.7654 48.0986,17.1667L 42.296,22.9627C 42.1973,23.1667 41.9013,23.2654 41.5986,23.2654 Z "/>
        <PathGeometry Figures="M 26.1973,4.46273C 26.0986,4.46273 25.9013,4.46273 25.796,4.36406C 25.6973,4.26538 25.5986,4.26538 25.5,4.16671C 25.5,4.16671 25.4013,4.06804 25.4013,3.96273C 25.4013,3.86406 25.296,3.86406 25.296,3.76538C 25.296,3.66671 25.296,3.66671 25.1973,3.56804C 25.1973,3.46273 25.1973,3.46273 25.1973,3.36406C 25.1973,3.26538 25.1973,3.26538 25.1973,3.16671C 25.1973,3.06804 25.1973,3.06804 25.296,2.96273C 25.296,2.86406 25.4013,2.86406 25.4013,2.76538C 25.4013,2.66671 25.5,2.66671 25.5,2.56804C 25.5986,2.46273 25.6973,2.36406 25.796,2.36406C 26.1973,2.16671 26.6973,2.26538 27,2.56804C 27,2.56804 27.0986,2.66671 27.0986,2.76538C 27.0986,2.76538 27.1973,2.86406 27.1973,2.96273C 27.1973,3.06804 27.1973,3.06804 27.296,3.16671C 27.296,3.26538 27.296,3.26538 27.296,3.36406C 27.296,3.46273 27.296,3.46273 27.296,3.56804C 27.296,3.66671 27.296,3.66671 27.1973,3.76538C 27.1973,3.86406 27.0986,3.86406 27.0986,3.96273C 27.0986,4.06804 27,4.06804 27,4.16671C 26.9013,4.26538 26.796,4.36406 26.6973,4.36406C 26.4013,4.46273 26.296,4.46273 26.1973,4.46273 Z "/>
        <PathGeometry Figures="M 13.1973,42.8641C 12.9013,42.8641 12.6973,42.7654 12.4013,42.568C 12.4013,42.568 12.296,42.4627 12.296,42.3641C 12.296,42.2654 12.1973,42.2654 12.1973,42.1667C 12.1973,42.068 12.1973,42.068 12.0986,41.9627C 12.0986,41.8641 12.0986,41.8641 12.0986,41.7654C 12.0986,41.4627 12.1973,41.2654 12.4013,40.9627C 12.796,40.568 13.5,40.568 13.9013,40.9627C 14.0986,41.1667 14.1973,41.4627 14.1973,41.7654C 14.1973,41.8641 14.1973,41.8641 14.1973,41.9627C 14.1973,42.068 14.1973,42.068 14.0986,42.1667C 14.0986,42.2654 14,42.2654 14,42.3641C 14,42.4627 13.9013,42.4627 13.9013,42.568C 13.6973,42.7654 13.5,42.8641 13.1973,42.8641 Z "/>
        <PathGeometry Figures="M 22,19.4627C 21.6973,19.4627 21.5,19.3641 21.1973,19.1667C 20.796,18.7654 20.796,18.068 21.1973,17.6667L 36.5,2.36406C 36.9013,1.96273 37.5986,1.96273 38,2.36406C 38.4013,2.76538 38.4013,3.46273 38,3.86406L 22.6973,19.1667C 22.5,19.3641 22.1973,19.4627 22,19.4627 Z "/>
        <PathGeometry Figures="M 42,16.6667C 41.6973,16.6667 41.5,16.568 41.1973,16.3641C 40.796,15.9627 40.796,15.2654 41.1973,14.8641L 43.5986,12.4627C 44,12.068 44.6973,12.068 45.0986,12.4627C 45.5,12.8641 45.5,13.568 45.0986,13.9627L 42.6973,16.3641C 42.5,16.568 42.296,16.6667 42,16.6667 Z "/>
        <PathGeometry Figures="M 39.796,1.66671C 39.6973,1.66671 39.6973,1.66671 39.5986,1.66671C 39.5,1.66671 39.5,1.66671 39.4013,1.56804C 39.296,1.46273 39.296,1.46273 39.1973,1.46273C 39.0986,1.46273 39.0986,1.36406 39,1.36406C 38.796,1.16671 38.6973,0.864056 38.6973,0.568035C 38.6973,0.46273 38.6973,0.265381 38.796,0.16671C 38.9013,0.0680351 38.9013,-0.0372696 39,-0.135944C 39.1973,-0.33329 39.5986,-0.53727 40,-0.431965C 40.0986,-0.431965 40.0986,-0.431965 40.1973,-0.33329C 40.296,-0.33329 40.296,-0.33329 40.4013,-0.234619C 40.5,-0.135944 40.5,-0.135944 40.5986,-0.135944C 40.5986,-0.135944 40.6973,-0.0372696 40.6973,0.0680351C 40.6973,0.16671 40.796,0.16671 40.796,0.265381C 40.9013,0.364056 40.9013,0.568035 40.9013,0.66671C 40.9013,0.96273 40.796,1.16671 40.5986,1.46273C 40.5986,1.46273 40.5,1.56804 40.4013,1.56804C 40.296,1.56804 40.296,1.66671 40.1973,1.66671C 40.0986,1.66671 40.0986,1.66671 40,1.76538C 40,1.66671 39.9013,1.66671 39.796,1.66671 Z "/>
        <PathGeometry Figures="M 11.4013,28.1667C 11.296,28.1667 11.0986,28.1667 11,28.068C 10.9013,27.9627 10.796,27.9627 10.6973,27.8641C 10.5986,27.7654 10.5,27.6667 10.5,27.4627C 10.5,27.2654 10.4013,27.1667 10.4013,27.068C 10.4013,26.7654 10.5,26.4627 10.6973,26.2654C 11.0986,25.8641 11.796,25.8641 12.1973,26.2654C 12.4013,26.4627 12.5,26.7654 12.5,27.068C 12.5,27.1667 12.5,27.3641 12.4013,27.4627C 12.4013,27.568 12.296,27.6667 12.1973,27.8641C 12,28.068 11.6973,28.1667 11.4013,28.1667 Z "/>
        <PathGeometry Figures="M 20.1973,33.8641C 20.0986,33.8641 19.9013,33.8641 19.796,33.7654C 19.6973,33.6667 19.5986,33.6667 19.5,33.568C 19.5,33.568 19.4013,33.4627 19.4013,33.3641C 19.4013,33.2654 19.296,33.2654 19.296,33.1667C 19.296,33.068 19.296,33.068 19.1973,32.9627C 19.1973,32.8641 19.1973,32.8641 19.1973,32.7654C 19.1973,32.4627 19.296,32.2654 19.5,31.9627C 19.9013,31.568 20.5986,31.568 21,31.9627C 21.1973,32.1667 21.296,32.4627 21.296,32.7654C 21.296,32.8641 21.296,32.8641 21.296,32.9627C 21.296,33.068 21.296,33.068 21.1973,33.1667C 21.1973,33.2654 21.0986,33.2654 21.0986,33.3641C 21.0986,33.4627 21,33.4627 21,33.568C 20.9013,33.6667 20.796,33.7654 20.6973,33.7654C 20.5,33.8641 20.4013,33.8641 20.1973,33.8641 Z "/>
        <PathGeometry Figures="M 38.5986,13.068C 38.5,13.068 38.296,13.068 38.1973,12.9627C 38.0986,12.9627 38.0986,12.8641 38,12.8641C 38,12.8641 37.9013,12.7654 37.796,12.7654C 37.5986,12.568 37.5,12.2654 37.5,11.9627C 37.5,11.8641 37.5,11.6667 37.5986,11.568C 37.6973,11.4627 37.6973,11.3641 37.796,11.2654C 37.9013,11.1667 38,11.068 38.1973,11.068C 38.4013,10.9627 38.5986,10.9627 38.796,10.9627C 38.9013,10.9627 38.9013,10.9627 39,11.068C 39.0986,11.068 39.0986,11.1667 39.1973,11.1667C 39.296,11.1667 39.296,11.2654 39.4013,11.2654C 39.5,11.3641 39.5986,11.4627 39.5986,11.568C 39.5986,11.6667 39.6973,11.8641 39.6973,11.9627C 39.6973,12.068 39.6973,12.2654 39.5986,12.3641C 39.5986,12.4627 39.5,12.4627 39.5,12.568C 39.5,12.568 39.4013,12.6667 39.4013,12.7654C 39.4013,12.7654 39.296,12.8641 39.1973,12.8641C 39.0986,12.8641 39.0986,12.9627 39,12.9627C 38.9013,12.9627 38.9013,12.9627 38.796,13.068C 38.6973,13.068 38.6973,13.068 38.5986,13.068 Z "/>
        <PathGeometry Figures="M 26,25.6667C 25.6973,25.6667 25.5,25.568 25.1973,25.3641C 24.796,24.9627 24.796,24.2654 25.1973,23.8641L 34.4013,14.6667C 34.796,14.2654 35.5,14.2654 35.9013,14.6667C 36.296,15.068 36.296,15.7654 35.9013,16.1667L 26.6973,25.3641C 26.5,25.568 26.296,25.6667 26,25.6667 Z "/>
        <PathGeometry Figures="M 17.9013,30.2654C 16.6973,30.2654 15.796,29.3641 15.796,28.1667C 15.796,26.9627 16.6973,26.068 17.9013,26.068C 19.0986,26.068 20,26.9627 20,28.1667C 20,29.3641 19,30.2654 17.9013,30.2654 Z "/>
        <PathGeometry Figures="M 7.59863,34.8641C 7.59863,35.6921 6.92664,36.3641 6.09863,36.3641C 5.27063,36.3641 4.59863,35.6921 4.59863,34.8641C 4.59863,34.0361 5.27063,33.3641 6.09863,33.3641C 6.92664,33.3641 7.59863,34.0361 7.59863,34.8641 Z "/>
        <PathGeometry Figures="M 18.0986,38.9627C 18.0986,39.792 17.4266,40.4627 16.5986,40.4627C 15.7706,40.4627 15.0986,39.792 15.0986,38.9627C 15.0986,38.1347 15.7706,37.4627 16.5986,37.4627C 17.4266,37.4627 18.0986,38.1347 18.0986,38.9627 Z "/>
    </GeometryGroup>


    <Style x:Key="DSOHeaderExpanderStyle" TargetType="ToggleButton">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <StackPanel>
                        <Border Height="10" BorderBrush="Transparent" />
                        <Border x:Name="topBorder" BorderBrush="{StaticResource SecondaryBackgroundBrush}">
                            <Grid
                                x:Name="Head"
                                Background="{StaticResource TertiaryBackgroundBrush}"
                                SnapsToDevicePixels="True">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30" />
                                    <ColumnDefinition Width="30" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Path
                                    x:Name="iconarrow"
                                    Grid.Column="0"
                                    Width="10"
                                    Height="10"
                                    Margin="10,0,10,0"
                                    Data="{StaticResource ArrowRightSVG}"
                                    Fill="{StaticResource ButtonForegroundBrush}"
                                    Stretch="Uniform" />
                                <Path
                                    x:Name="icon"
                                    Grid.Column="1"
                                    Width="20"
                                    Height="20"
                                    Data="{StaticResource CalculatorSVG}"
                                    Fill="{StaticResource ButtonForegroundBrush}"
                                    Stretch="Uniform" />
                                <ContentPresenter
                                    Grid.Column="2"
                                    Margin="4,0,0,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    RecognizesAccessKey="True"
                                    SnapsToDevicePixels="True">
                                    <i:Interaction.Behaviors>
                                        <behaviors:DragDropBehavior />
                                    </i:Interaction.Behaviors>
                                </ContentPresenter>
                            </Grid>
                        </Border>
                    </StackPanel>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter TargetName="iconarrow" Property="Data" Value="{StaticResource ArrowDownSVG}" />
                            <Setter TargetName="iconarrow" Property="Margin" Value="5,0,10,0" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Head" Property="Background" Value="{StaticResource ButtonBackgroundSelectedBrush}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="DSOExpander" TargetType="ninactrl:DetachingExpander">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ninactrl:DetachingExpander">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Focusable="False"
                        SnapsToDevicePixels="true">
                        <DockPanel>
                            <ToggleButton
                                x:Name="HeaderSite"
                                MinWidth="0"
                                MinHeight="0"
                                Padding="{TemplateBinding Padding}"
                                HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                Content="{TemplateBinding Header}"
                                ContentTemplate="{TemplateBinding HeaderTemplate}"
                                ContentTemplateSelector="{TemplateBinding HeaderTemplateSelector}"
                                DockPanel.Dock="Top"
                                FocusVisualStyle="{StaticResource ExpanderHeaderFocusVisual}"
                                FontFamily="{TemplateBinding FontFamily}"
                                FontSize="{TemplateBinding FontSize}"
                                FontStretch="{TemplateBinding FontStretch}"
                                FontStyle="{TemplateBinding FontStyle}"
                                FontWeight="{TemplateBinding FontWeight}"
                                Foreground="{TemplateBinding Foreground}"
                                IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                Style="{StaticResource DSOHeaderExpanderStyle}" />
                            <StackPanel DockPanel.Dock="Bottom">
                                <Border
                                    Height="10"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="{Binding HorizontalAlignment, RelativeSource={RelativeSource AncestorType=ContentPresenter}, Mode=OneWayToSource}"
                                    Background="Transparent" />
                            </StackPanel>
                            <ContentPresenter
                                x:Name="ExpandSite"
                                Margin="{TemplateBinding Padding}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                Focusable="false"
                                Visibility="Collapsed" />
                        </DockPanel>
                        <i:Interaction.Behaviors>
                            <behaviors:DragOverBehavior DragAboveSize="0" DragBelowSize="0" />
                            <behaviors:DropIntoBehavior AllowedDragDropTypesString="NINA.Sequencer.TargetSequenceContainer" OnDropCommand="DropTargetCommand" />
                        </i:Interaction.Behaviors>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsExpanded" Value="true">
                            <Setter TargetName="ExpandSite" Property="Visibility" Value="Visible" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <DataTemplate DataType="{x:Type local:NEOCPListContainer}">
        <view:SequenceContainerView DataContext="{Binding}">
            <view:SequenceContainerView.SequenceContainerContent>
                <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,2">
                    <ninactrl:DetachingExpander IsExpanded="{Binding Target.Expanded}" Style="{StaticResource DSOExpander}">
                        <ninactrl:DetachingExpander.Resources>
                            <util:BindingProxy x:Key="DataContext" Data="{Binding}" />
                        </ninactrl:DetachingExpander.Resources>
                        <ninactrl:DetachingExpander.Header>
                            <StackPanel Orientation="Horizontal">
                                <Border MinHeight="25">
                                    <TextBlock
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="NEOCP Planner" />
                                </Border>
                                <StackPanel Margin="5,0,0,0" Orientation="Horizontal">
                                    <TextBlock
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="{Binding Target.TargetName, Mode=TwoWay}" />
                                    <TextBlock
                                            Margin="5,0,5,0"
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="|" />
                                    <TextBlock
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="{Binding Target.InputCoordinates.Coordinates.RAString}" />
                                    <TextBlock
                                            Margin="5,0,5,0"
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="|" />
                                    <TextBlock
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="{Binding Target.InputCoordinates.Coordinates.DecString}" />
                                    <TextBlock
                                            Margin="5,0,5,0"
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="|" />
                                    <TextBlock
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="{Binding Target.Rotation}" />
                                    <TextBlock
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource ButtonForegroundBrush}"
                                            Text="°" />
                                    <StackPanel.Style>
                                        <Style TargetType="StackPanel">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ninactrl:DetachingExpander}, Path=IsExpanded}" Value="True">
                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                </StackPanel>
                            </StackPanel>
                        </ninactrl:DetachingExpander.Header>
                        <Grid>
                            <Grid.Resources>
                                <util:BindingProxy x:Key="nighttimeProxy" Data="{Binding NighttimeData}" />
                                <models:RAConverter x:Key="RAConverter"/>
                                <models:DecConverter x:Key="DecConverter"/>
                            </Grid.Resources>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />

                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="auto" />
                            </Grid.RowDefinitions>
                            <StackPanel
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Margin="0,5,0,0"
                                    DataContext="{Binding}"
                                    Orientation="Horizontal">
                                <TextBlock
                                        VerticalAlignment="Center"
                                        Text="Get NEOCP" />
                                <Button
                                        Width="25"
                                        Height="25"
                                        Margin="5,0,5,0"
                                        VerticalAlignment="Center"
                                        HorizontalContentAlignment="Right"
                                        Command="{Binding LoadTargetsCommand}"
                                        Style="{StaticResource TertiaryBackgroundButton}">
                                    <Button.ToolTip>
                                        <ToolTip ToolTipService.ShowOnDisabled="False">
                                            <TextBlock Text="Click here to download NEOCP list." />
                                        </ToolTip>
                                    </Button.ToolTip>
                                    <Grid>
                                        <Path
                                                Margin="5"
                                                Data="{StaticResource DownloadSVG}"
                                                Fill="{StaticResource ButtonForegroundBrush}"
                                                Stretch="Uniform" />
                                    </Grid>
                                </Button>
                                <StackPanel Margin="5,5,5,5" Visibility="{Binding LoadingTargets, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}">
                                    <ninactrl:LoadingControl
                                            Width="15"
                                            Height="15"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            LoadingImageBrush="{StaticResource ButtonForegroundBrush}" />
                                </StackPanel>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="0"
                                Orientation="Vertical">
                                <DataGrid 
                                ItemsSource="{Binding NEOCPTargets}" 
                                AutoGenerateColumns="False" 
                                IsReadOnly="True"
                                SelectionMode="Single"
                                SelectionUnit="FullRow"
                                SelectedValue="{Binding SelectedNEO}"
                                MaxHeight="220">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header=" Designation " Binding="{Binding Designation}" />
                                        <DataGridTextColumn Header=" RA " Binding="{Binding RA, Converter={StaticResource RAConverter}}" />
                                        <DataGridTextColumn Header=" Dec " Binding="{Binding Dec, Converter={StaticResource DecConverter}}" />
                                        <DataGridTextColumn Header=" V " Binding="{Binding V, StringFormat=\{0:f1\}}" />
                                        <DataGridTextColumn Header=" &quot;/min " Binding="{Binding totalSpeed, StringFormat=\{0\,4:f3\}}" />
                                        <DataGridTextColumn Header=" NObs " Binding="{Binding NObs}" />
                                        <DataGridTextColumn Header=" Arc " Binding="{Binding Arc}" />
                                        <DataGridTextColumn Header=" Days " Binding="{Binding NotSeenIn}" />
                                        <DataGridTextColumn Header=" H " Binding="{Binding H, StringFormat=\{0:f1\}}" />
                                        <DataGridTextColumn Header=" Exp. Max (s) " Binding="{Binding ExpMax}" />
                                        <DataGridTextColumn Header=" T. Max (min) " Binding="{Binding TMax}" />
                                    </DataGrid.Columns>
                                </DataGrid>
                                <Button 
                                        Content="Generate NEO container"
                                        Margin="0,10"
                                        Height="30"
                                        IsEnabled="{Binding NEOCPTargets.Count}"
                                        Command="{Binding CreateNEOFieldCommand}">
                                    <Button.ToolTip>
                                        <ToolTip ToolTipService.ShowOnDisabled="False">
                                            <TextBlock Text="Generate DSO container for the selected NEO." />
                                        </ToolTip>
                                    </Button.ToolTip>
                                </Button>
                            </StackPanel>
                            <alt:AltitudeChart
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Grid.RowSpan="2"
                                    MinWidth="400"
                                    VerticalAlignment="Top"
                                    Margin="10,0,0,0"
                                    HorizontalAlignment="Stretch"
                                    HorizontalContentAlignment="Stretch"
                                    DataContext="{Binding NEOCPDSO}"
                                    NighttimeData="{Binding Source={StaticResource nighttimeProxy}, Path=Data}" />
                        </Grid>
                    </ninactrl:DetachingExpander>
                </Border>
            </view:SequenceContainerView.SequenceContainerContent>
        </view:SequenceContainerView>
    </DataTemplate>
</ResourceDictionary>